#Example on how to miscalibrate rec hits starting from rechits.


process ProcessOne = {

  service = MessageLogger {
     untracked vstring destinations = {"cout"}
     untracked PSet cout = {
       untracked  PSet default = { untracked int32 limit = 0 }
     }
  }

# Empty event source
      source = EmptyIOVSource {
          string timetype = "runnumber"
          untracked uint32 firstRun = 1
	  untracked uint32 lastRun = 1
          uint32 interval = 1
        }

    
    // Database output service

    include "CondCore/DBCommon/data/CondDBCommon.cfi"


# to write in sqlite
#    replace CondDBCommon.connect = "sqlite_file:DB.db"    
#    replace CondDBCommon.catalog = "file:PoolFileCatalog_DB.xml"

# to write into int2r_orcoff
#    replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_HCAL"
#    replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"
#    replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"    

# to write into orcon
#     replace CondDBCommon.connect = "oracle://orcon/CMS_COND_HCAL"
#     replace CondDBCommon.catalog = "relationalcatalog_oracle://orcon/CMS_COND_GENERAL"
#     replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/user/r/rofierzy/DBauth/orcon"


service = PoolDBOutputService {
        using CondDBCommon
        VPSet toPut = { { string record = "HcalGainsRcd" string tag = "hcal_gains_v1" } }
    }


es_source = HcalTextCalibrations { 
            VPSet input = {
                           {string object = "Gains"
                            FileInPath file = "CondFormats/HcalObjects/data/hcal_gains_v1.txt"
                           }
	                  }
                        }

####the following is for miscalibrated gains
#service = PoolDBOutputService {
#        using CondDBCommon
#        VPSet toPut = { { string record = "HcalGainsRcd" string tag = "hcal_gains_miscalib_v1" } }
#    }


#es_source = HcalTextCalibrations { 
#            VPSet input = {
#                           {string object = "Gains"
#                            FileInPath file = "CondFormats/HcalObjects/data/hcal_gain_miscalib_v1.txt"
#                           }
#	                  }
#                        }



es_prefer = HcalTextCalibrations{}


module WriteInDB = WriteHcalGains{
    string NewTagRequest = "HcalGainsRcd"
}

  path p = {WriteInDB}
}

