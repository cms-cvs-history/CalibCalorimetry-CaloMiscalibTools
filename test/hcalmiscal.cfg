process hcalminimumbias = {
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
    untracked vstring fileNames = {
       '/store/mc/2007/10/20/RelVal-RelValQCD_Pt_50_80-1192895175/0000/0632EB0B-1880-DC11-8984-000423D987FC.root'
    }
  }
untracked PSet maxEvents = {untracked int32 input = 100}

module recalrechit = HcalRecHitRecalib {
    InputTag hbheInput = hbhereco
    InputTag hoInput = horeco
    InputTag hfInput = hfreco

    string RecalibHBHEHitCollection = "RecalibHBHE"
    string RecalibHFHitCollection = "RecalibHF"
    string RecalibHOHitCollection = "RecalibHO"

    untracked string fileNameHcal = "hcalmiscalib_0.1.xml"
    untracked double Refactor = 0.5
    untracked double Refactor_mean = 1.0	    
}

#include "RecoJets/Configuration/data/CaloTowersRec.cff"
#replace towerMaker.hbheInput = recalrechit:RecalibHBHE
#replace towerMaker.hfInput = recalrechit:RecalibHF
#replace towerMaker.hoInput = recalrechit:RecalibHO


  module MinRecos = PoolOutputModule {
    untracked string fileName = 'hcalmin_half.root'
    untracked vstring outputCommands =
    {
      "drop *",
      "keep HBHERecHitsSorted_*_*_*",
      "keep HORecHitsSorted_*_*_*",
      "keep HFRecHitsSorted_*_*_*",
      "keep CaloTowersSorted_*_*_*",	
      "keep *_caloTowers_*_*"
    }
  } 


  path p = {recalrechit}
#  path p = {recalrechit, towerMaker, caloTowers}
#  path p = {recalrechit,caloTowersRec}
#  path p = {caloTowersRec}

  endpath e = {MinRecos}  
}
