process hcalminimumbias = {
include "Configuration/Examples/data/MessageLogger.cfi"
#  service = Timing {}
#  service = SimpleMemoryCheck {
#    untracked int32 ignoreTotal = 1 # default is one
#  } 

  source = PoolSource {
    untracked vstring fileNames = {
       '/store/unmerged/RelVal/2006/9/19/RelVal100BJets50-120/GEN-SIM-DIGI-RECO/0006/BC08F05D-1848-DB11-B5BF-000E0C4D3E27.root'
#      '/store/unmerged/RelVal/2006/8/13/RelVal090SingleEPt35/GEN-SIM-DIGI-RECO/0005/36425AEE-1D2B-DB11-9742-00304885B014.root'
#    'file:/afs/cern.ch/user/m/michals/scratch0/myreco4.root'
  }
    untracked int32 maxEvents = 2
  }

module recalrechit = HcalRecHitRecalib {
    InputTag hbheInput = hbhereco
    InputTag hoInput = horeco
    InputTag hfInput = hfreco

    string RecalibHBHEHitCollection = "RecalibHBHE"
    string RecalibHFHitCollection = "RecalibHF"
    string RecalibHOHitCollection = "RecalibHO"

#    untracked string fileNameHcal = "miscalibhcal.xml"
    untracked string fileNameHcal = "hcal_0.02.xml"
#    untracked string fileNameHcal = "hcal_1.1.xml"
}

#defines  caloTowersRec, caloJetMet, caloJetMetGen

include "Configuration/Applications/data/reco-application-calorimetry-caltowers.cff"
#replace towerMaker.hbheInput = recalrechit:RecalibHBHE
#replace towerMaker.hfInput = recalrechit:RecalibHF
#replace towerMaker.hoInput = recalrechit:RecalibHO


  module MinRecos = PoolOutputModule {
    untracked string fileName = 'hcalmin.root'
    untracked vstring outputCommands =
    {
      "drop *",
      "keep HBHERecHitsSorted_*_*_*",
      "keep HORecHitsSorted_*_*_*",
      "keep HFRecHitsSorted_*_*_*",
      "keep CaloTowersSorted_*_*_*",	
      "keep *_caloTowers_*_*"
    }
  } 


#  path p = {recalrechit, towerMaker, caloTowers}
#  path p = {recalrechit,caloTowersRec}
#  path p = {caloTowersRec}

  endpath e = {MinRecos}  
}
