#Example on how to miscalibrate rec hits starting from rechits.


process ProcessOne = {

  service = MessageLogger {
     untracked vstring destinations = {"cout"}
     untracked PSet cout = {
       untracked  PSet default = { untracked int32 limit = 0 }
     }
  }

# Empty event source
      source = EmptyIOVSource {
          string timetype = "runnumber"
          uint64 firstValue = 1
	  uint64 lastValue = 1
          uint64 interval = 1
        }

    
    // Database output service

    include "CondCore/DBCommon/data/CondDBCommon.cfi"
# to write into sqlite
#    replace CondDBCommon.connect = "sqlite_file:ecalMiscalibcsa07_invstartup.db"    
# to write into int2r_orcoff
    replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_ECAL"
    replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"    

    service = PoolDBOutputService {
        using CondDBCommon
        VPSet toPut = { { string record = "EcalIntercalibConstantsRcd" string tag = "inv_miscalibcsa07_startup" } }
    }


es_source = CaloMiscalibTools{
   untracked string fileNameBarrel = "inv_ecal_barrel_startup.xml"
   untracked string fileNameEndcap = "inv_ecal_endcap_startup.xml"

}
es_prefer = CaloMiscalibTools{}

module WriteInDB = WriteEcalMiscalibConstants{
    string NewTagRequest = "EcalIntercalibConstantsRcd"
}

  path p = {WriteInDB}
}

